digraph G {
    
  node [shape=rectangle];
  
  start [shape=circle];
  "is interactive ?" [shape=diamond];
  
  "extract data with given args"

  subgraph cluster_1 {
    label = "interactive";
    "ask for database url" 
    -> "ask for database port" 
    -> "ask for database schema name" 
    -> "ask for database user"
    -> "ask for database user's password"
    -> "extract data with given args"
  }
  
  subgraph cluster_2 {
    label = "not interactive";
    "is url arg present ?" [shape=diamond]
    "get user input"
    -> "is url arg present ?";
    "is url arg present ?" -> "connect to url" [label="yes"];
    "is url arg present ?" -> "is sqlite arg present ?" [label="no"];
    
      subgraph cluster_2_step1 {
        label = "url arg present";
        "connect to url" -> "extract data with given args"
      }
      
      subgraph cluster_2_step2 {
        label = "url arg missing";
        "is sqlite arg present ?" [shape=diamond];
        
        "is sqlite arg present ?" -> "process input as sqlite database" [label="yes"];
        "is sqlite arg present ?" -> "process input as file" [label="no"];
        
        subgraph cluster_2_step2_step1 {
            label = "sqlite arg missing";
            "process input as file" -> "extract data with given args"
        }
        
        subgraph cluster_2_step2_step2 {
            label = "sqlite arg present";
            "process input as sqlite database" -> "extract data with given args"
        }
      }
  }
  
  
  start 
  -> "init logger"
  -> "load cli args";
  "load cli args"
  -> "is interactive ?"
  "is interactive ?" -> "ask for database url" [label="yes"];
  "is interactive ?" -> "get user input" [label="no"];
  

  end [shape=circle];
}
